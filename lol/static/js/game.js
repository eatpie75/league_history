(function(){var TellMeMore,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};TellMeMore=function(){function TellMeMore(){this.game=window.game_pk,this.cache={},this.bind()}return TellMeMore.prototype.bind=function(){var _this_;return _this_=this,$(".player_expand").click(function(e){return _this_.expand($(this))})},TellMeMore.prototype.bind_toggle=function(el,extra,expand){var _this_;return expand==null&&(expand=1),_this_=this,el.unbind(),$(el).click(function(e){return expand?_this_.expand($(this)):_this_.collapse($(this),extra)})},TellMeMore.prototype.info_template=_.template("<td colspan=11>			<div class='span4'>				<b>Physical/Magical Damage</b><br>				<div class='hori-bar purple' title='Magical Damage'><div class='red' title='Physical Damage' style='width:<% print((physical_damage_dealt/damage_dealt)*100) %>%;'></div></div>			</div>		</td>"),TellMeMore.prototype.get_info=function(player){var _ref,_this=this;return(_ref=""+player,__indexOf.call(_.keys(this.cache),_ref)<0)&&$.ajax({type:"GET",async:!1,url:"/ajax/player_info/"+player+"/",dataType:"json",success:function(msg){return _this.cache[player]=msg}}),this.cache[player]},TellMeMore.prototype.expand=function(el){var extra,info,player,_this=this;return player=el.data("player"),info=this.get_info(player),extra=$("<tr class='drop-stats'></tr>").insertAfter(el.closest("tr")),extra.css("height"),extra.css("height","100px"),setTimeout(function(){return extra.html(_this.info_template(info))},210),this.bind_toggle(el,extra,0)},TellMeMore.prototype.collapse=function(el,extra){var _this=this;return extra.html(""),extra.css("height","0px"),setTimeout(function(){return extra.remove()},500),this.bind_toggle(el)},TellMeMore}(),$(document).ready(function(){return window.tell_me_more=new TellMeMore})}).call(this)